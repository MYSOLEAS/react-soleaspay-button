"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);exports.SopayButton=()=>n.default.createElement("div",{className:"sopayButton"}),exports.useSopayButton=({apiKey:t,langue:n,mode:o,btnTitle:r,amount:a,currency:s,orderId:c,description:i,businessName:u,loadInvoice:l,successUrl:d})=>(e.useEffect((()=>{const e=document.createElement("script"),p=document.createElement("script");return e.id="SBScript",e.type="text/javascript",e.setAttribute("data-lang",n),e.setAttribute("data-apikey",t),e.async=!0,e.src="https://soleaspay.com/webPay/v2/sopayButton.min.js",document.body.appendChild(e),e.onload=()=>{p.type="text/javascript",p.async=!1,p.innerHTML=`\n      const options = {\n        btnTitle: '${r}',\n        amount: ${a},\n        currency: "${s}",\n        orderId: "${c}",\n        description: "${i}",\n        businessName: '${u}',\n        loadInvoice: ${l},\n        successUrl: '${d}'\n      };\n\n      function initButton() {\n        return SopayButton.${o}(options)\n        .then((res) => {\n            localStorage.setItem('sopayresult', JSON.stringify(res));\n        })\n        .catch((err) => {\n            localStorage.setItem('sopayresult', JSON.stringify(err));\n        })\n        .finally(initButton);\n      }\n\n      initButton();\n    `,document.body.appendChild(p)},()=>{document.body.removeChild(p),document.body.removeChild(e)}}),[t,n,o,r,a,s,c,i,u,l,d]),new Promise(((e,t)=>{let n=setInterval((()=>{const t=JSON.parse(localStorage.getItem("sopayresult"));null!==t&&(localStorage.removeItem("sopayresult"),clearInterval(n),e(t))}),1e3)})));
