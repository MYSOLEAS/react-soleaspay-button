import t,{useEffect as e}from"react";const n=()=>t.createElement("div",{className:"sopayButton"}),o=({apiKey:t,langue:n,mode:o,btnTitle:r,amount:s,currency:a,orderId:c,description:i,businessName:l,loadInvoice:u,successUrl:d})=>(e((()=>{const e=document.createElement("script"),p=document.createElement("script");return e.id="SBScript",e.type="text/javascript",e.setAttribute("data-lang",n),e.setAttribute("data-apikey",t),e.async=!0,e.src="https://soleaspay.com/webPay/v2/sopayButton.min.js",document.body.appendChild(e),e.onload=()=>{p.type="text/javascript",p.async=!1,p.innerHTML=`\n      const options = {\n        btnTitle: '${r}',\n        amount: ${s},\n        currency: "${a}",\n        orderId: "${c}",\n        description: "${i}",\n        businessName: '${l}',\n        loadInvoice: ${u},\n        successUrl: '${d}'\n      };\n\n      function initButton() {\n        return SopayButton.${o}(options)\n        .then((res) => {\n            localStorage.setItem('sopayresult', JSON.stringify(res));\n        })\n        .catch((err) => {\n            localStorage.setItem('sopayresult', JSON.stringify(err));\n        })\n        .finally(initButton);\n      }\n\n      initButton();\n    `,document.body.appendChild(p)},()=>{document.body.removeChild(p),document.body.removeChild(e)}}),[t,n,o,r,s,a,c,i,l,u,d]),new Promise(((t,e)=>{let n=setInterval((()=>{const e=JSON.parse(localStorage.getItem("sopayresult"));null!==e&&(localStorage.removeItem("sopayresult"),clearInterval(n),t(e))}),1e3)})));export{n as SopayButton,o as useSopayButton};
