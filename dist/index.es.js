import t,{useEffect as n}from"react";const e=({apiKey:t,langue:e,mode:o,btnTitle:r,amount:s,currency:a,orderId:i,description:c,businessName:l,loadInvoice:u,successUrl:p})=>(n((()=>{const n=document.getElementById("SBScript"),d=document.getElementById("SBScript2");if(n&&d)n.setAttribute("data-lang",e),n.setAttribute("data-apikey",t),d.innerHTML=`\n      const options = {\n        btnTitle: '${r}',\n        amount: ${s},\n        currency: "${a}",\n        orderId: "${i}",\n        description: "${c}",\n        businessName: '${l}',\n        loadInvoice: ${u},\n        successUrl: '${p}'\n      };\n\n      function initButton() {\n        return SopayButton.${o}(options)\n        .then((res) => {\n            localStorage.setItem('sopayresult', JSON.stringify(res));\n        })\n        .catch((err) => {\n            localStorage.setItem('sopayresult', JSON.stringify(err));\n        })\n        .finally(initButton);\n      }\n\n      initButton();\n    `;else{const n=document.createElement("script"),d=document.createElement("script");n.id="SBScript",n.type="text/javascript",n.setAttribute("data-lang",e),n.setAttribute("data-apikey",t),n.async=!0,n.src="https://soleaspay.com/webPay/v2/sopayButton.min.js",document.body.appendChild(n),n.onload=()=>{d.id="SBScript2",d.type="text/javascript",d.async=!1,d.innerHTML=`\n      const options = {\n        btnTitle: '${r}',\n        amount: ${s},\n        currency: "${a}",\n        orderId: "${i}",\n        description: "${c}",\n        businessName: '${l}',\n        loadInvoice: ${u},\n        successUrl: '${p}'\n      };\n\n      function initButton() {\n        return SopayButton.${o}(options)\n        .then((res) => {\n            localStorage.setItem('sopayresult', JSON.stringify(res));\n        })\n        .catch((err) => {\n            localStorage.setItem('sopayresult', JSON.stringify(err));\n        })\n        .finally(initButton);\n      }\n\n      initButton();\n    `,document.body.appendChild(d)}}}),[t,e,o,r,s,a,i,c,l,u,p]),new Promise(((t,n)=>{let e=setInterval((()=>{const n=JSON.parse(localStorage.getItem("sopayresult"));null!==n&&(localStorage.removeItem("sopayresult"),clearInterval(e),t(n))}),1e3)}))),o=()=>t.createElement("div",{className:"sopayButton"});export{o as SopayButton,e as useSopayButton};
